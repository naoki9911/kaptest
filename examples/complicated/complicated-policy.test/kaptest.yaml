policies:
- ../complicated-policy.yaml
resources:
- resources.yaml
- params.yaml
- namespace.yaml
vapTestSuites:
- policy: policy-with-params
  tests:
  - object:
      kind: Deployment
      name: good-deployment
    param:
      name: config
    expect: admit
  - object:
      kind: Deployment
      name: bad-deployment
    param:
      name: config
    expect: deny
- policy: policy-with-namespace
  tests:
  - object:
      kind: Deployment
      name: good-deployment-with-namespace
      namespace: foo
    expect: admit
  - object:
      kind: Deployment
      name: bad-deployment-with-namespace
      namespace: foo
    expect: deny
mapTestSuites:
- policy: policy-with-params
  binding: policy-with-params-binding
  tests:
  - object: 
        kind: Deployment
        name: less-replicas-deployment
    paramObjects:
    - kind: ConfigMap 
      name: config
    expect: mutate
    expectObject:
      kind: Deployment
      name: good-deployment
- policy: policy-with-namespace
  binding: policy-with-namespace-binding
  tests:
  - object: 
        kind: Deployment
        name: less-replicas-deployment-with-namespace
    expect: mutate
    expectObject:
      kind: Deployment
      name: good-deployment-with-namespace
