policies:
- ../map-with-params.yaml
resources:
- resources.yaml
mapTestSuites:
- policy: deployment-replicas
  binding: deployment-replicas-binding-1
  tests:
  - object:
      kind: Deployment
      name: small
      namespace: foo
    paramObjects:
    - kind: ConfigMap
      name: config1
    - kind: ConfigMap
      name: config2
    expect: mutate
    expectObject:
      kind: Deployment
      name: ok
      namespace: foo
  - object:
      kind: Deployment
      name: ok
      namespace: foo
    paramObjects:
    - kind: ConfigMap
      name: config1
    - kind: ConfigMap
      name: config2
    expect: skip
- policy: deployment-replicas
  binding: deployment-replicas-binding-2
  tests:
  - object:
      kind: Deployment
      name: ok
    paramObjects:
    - kind: ConfigMap
      name: config1
    - kind: ConfigMap
      name: config2
    expect: mutate
    expectObject:
      kind: Deployment
      name: large
